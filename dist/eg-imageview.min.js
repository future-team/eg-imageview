!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"),require("eagle-ui/lib/utils/Component"),require("eagle-ui"),require("react/lib/ReactDOM"));else if("function"==typeof define&&define.amd)define(["react","eagle-ui/lib/utils/Component","eagle-ui","react/lib/ReactDOM"],e);else{var n="object"==typeof exports?e(require("react"),require("eagle-ui/lib/utils/Component"),require("eagle-ui"),require("react/lib/ReactDOM")):e(t.React,t.Component,t.Eagleui,t.ReactDom);for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(this,function(t,e,n,o){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var r=n(2),i=o(r);e.ImageView=i["default"],window.Eagleui&&(Eagleui.Upload=e.ImageView)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(3),l=o(u),p=n(4),c=o(p),f=n(5),d=n(6),h=(o(d),n(7)),g=o(h),m=n(8),y=o(m),v=n(9),b=o(v),x=n(11),w=(o(x),function(t){function e(n,o){r(this,e),t.call(this,n,o),this.imgId=this.uniqueId(),this.transform="scale(1, 1) rotate(0deg)",this.state={maxHeight:1*document.documentElement.clientHeight-100,maxWidth:1*document.documentElement.clientWidth-100,imgWrap:{height:"auto",width:"auto"},modifyImgStyle:null}}return i(e,t),s(e,null,[{key:"propTypes",value:{classPrefix:u.PropTypes.string,componentTag:u.PropTypes.string},enumerable:!0},{key:"defaultProps",value:{componentTag:"div",file:{name:"",url:""},id:""},enumerable:!0}]),e.prototype.cssEnhance=function(t){var e=this.transform.match(/-?\d+\.?\d*/g);if(e&&e.length>=3){var n=0,o=n.zoom,r=n.rotate;switch(t){case"rotate":o=0,r=90;break;case"max":o=.5,r=0;break;case"min":o=-.5,r=0}this.calculatePosition(o,r,t)}},e.prototype.handleResize=function(){},e.prototype.componentDidMount=function(){},e.prototype.componentWillUnmount=function(){},e.prototype.componentWillReceiveProps=function(t){this.transform="scale(1, 1) rotate(0deg)",this.setState({imgWrap:{height:"auto",width:"auto"},modifyImgStyle:null})},e.prototype.onLoadHandler=function(t){this.imgSize=y["default"](t.target).offset(),this.setState({imgWrap:{width:this.imgSize.width,height:this.imgSize.height}})},e.prototype.getDeg=function(t){switch(t/180%2){case 0:case 1:t=0;break;case.5:t=1;break;case 1.5:t=-1;break;default:t=0}return t},e.prototype.calculatePosition=function(t,e,n){var o=this.transform.match(/-?\d+\.?\d*/g),r=1*o[0]+t,i=1*o[2]+e,a=o[3]||o[4]||0;if("rotate"==n){var s=this.getDeg(i);if(0==s)a=0,this.setState({imgWrap:{width:this.imgSize.width,height:this.imgSize.height},modifyImgStyle:null});else{var u=this.imgSize.width/this.imgSize.height,l=this.state.imgWrap.height,p=this.state.imgWrap.width,c=this.state.maxWidth,d=this.state.maxHeight;l>c?(l=c,p=u*l):p>d&&(l=p/u,p=d),a=s*(p-l)/2,this.setState({imgWrap:{width:l,height:p},modifyImgStyle:{width:p,height:l}})}}else this.draggable.reset();var h=1*a,m=t||r-1;0!=m&&(m=m>0?.5:2,h=m*h),this.transform="scale("+r+", "+r+") rotate("+i+"deg) translate("+h+"px, "+h+"px)",setTimeout(function(){g["default"].findDOMNode(this.refs[this.imgId]).style.transform=this.transform}.bind(this)),f.Dialog.mask(this.props.id)},e.prototype.render=function(){var t,e=this,n=this.props.file;return l["default"].createElement(f.Dialog,a({id:this.props.id,isClose:!0,isMask:!0,title:n.name||""},this.props),l["default"].createElement("div",null,l["default"].createElement("div",{className:"img-wrap "+(this.props.overflow?"img-wrap-hidden":"img-wrap-show"),style:{height:this.state.imgWrap.height,width:this.state.imgWrap.width}},l["default"].createElement(b["default"],{ref:function(t){e.draggable=t}},l["default"].createElement("img",{draggable:"false",id:this.imgId,onLoad:this.onLoadHandler.bind(this),ref:this.imgId,src:n.url,alt:"",style:a({maxHeight:this.state.maxHeight+"px",maxWidth:this.state.maxWidth+"px",msTransform:this.transform,WebkitTransform:this.transform,MozTransform:this.transform,oTransform:this.transform,transform:this.transform},this.state.modifyImgStyle)}))),l["default"].createElement("div",{className:"icon-box"},l["default"].createElement(f.Icon,{onClick:(t=this.cssEnhance).bind.call(t,this,"rotate"),className:"upload-icon",name:"radio_unchecked",alt:"旋转"}),l["default"].createElement(f.Icon,{onClick:(t=this.cssEnhance).bind.call(t,this,"max"),className:"upload-icon",name:"add",alt:"放大"}),l["default"].createElement(f.Icon,{onClick:(t=this.cssEnhance).bind.call(t,this,"min"),className:"upload-icon",name:"remove",alt:"缩小"}))))},e}(c["default"]));e["default"]=w,t.exports=e["default"]},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){var o,r;/*!
	  Copyright (c) 2016 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];if(o){var r=typeof o;if("string"===r||"number"===r)t.push(o);else if(Array.isArray(o))t.push(n.apply(null,o));else if("object"===r)for(var a in o)i.call(o,a)&&o[a]&&t.push(a)}}return t.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof t&&t.exports?t.exports=n:(o=[],r=function(){return n}.apply(e,o),!(void 0!==r&&(t.exports=r)))}()},function(t,e){t.exports=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e){n(this,t),this.obj=e}return t.prototype.offset=function(){for(var t=this.obj,e=t.offsetLeft,n=t.offsetTop,o=t.offsetParent;o&&o.nodeName.toLowerCase()!=document.body;)n+=o.offsetTop,e+=o.offsetLeft,o=o.offsetParent;return{top:n,left:e,width:t.offsetWidth,height:t.offsetHeight}},t.prototype.parents=function(t){try{for(var e=this.obj.parentNode;e&&e.tagName!=arguments[0].toUpperCase();)e=e.parentNode;return[e]}catch(n){return[]}},t.prototype.matchNode=function(t,e,n){for(var o=t[n];o;o=o[e])if(1==o.nodeType)return o;return null},t.prototype.next=function(){return this.matchNode(this.obj,"nextSibling","nextSibling")},t.prototype.prev=function(){return this.matchNode(this.obj,"previousSibling","previousSibling")},t.prototype.first=function(){return this.matchNode(this.obj,"nextSibling","firstChild")},t.prototype.last=function(){return this.matchNode(this.obj,"previousSibling","lastChild")},t.prototype.parent=function(){return this.matchNode(this.obj,"parentNode","parentNode")},t.prototype.children=function e(){for(var t=this.obj,e=[],n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e.push(n);return e},t}();t.exports=function(t){return new o(t)}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=n(3),l=o(u),p=n(7),c=o(p),f=n(4),d=o(f),h=n(8),g=o(h),m=n(6),y=o(m),v=n(10),b={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},x=b.mouse,w=function(t){function e(n){r(this,e),t.call(this,n),this.state={dragging:!1,dragged:!1,x:n.position?n.position.x:n.defaultPosition.x,y:n.position?n.position.y:n.defaultPosition.y,slackX:0,slackY:0,touchIdentifier:null}}return i(e,t),s(e,null,[{key:"propTypes",value:{bounds:u.PropTypes.string,defaultPosition:u.PropTypes.shape({x:u.PropTypes.number,y:u.PropTypes.number}),position:u.PropTypes.shape({x:u.PropTypes.number,y:u.PropTypes.number})},enumerable:!0},{key:"defaultProps",value:{bounds:"parent",defaultPosition:{x:0,y:0},position:null},enumerable:!0}]),e.prototype.componentWillMount=function(){},e.prototype.componentDidMount=function(){},e.prototype.componentWillReceiveProps=function(t){!t.position||this.props.position&&t.position.x===this.props.position.x&&t.position.y===this.props.position.y||this.setState({x:t.position.x,y:t.position.y})},e.prototype.componentWillUnmount=function(){this.setState({dragging:!1})},e.prototype.createCoreData=function(t,e){var n=this,o=n.state,r=!v.isNum(o.lastX);return r?{node:c["default"].findDOMNode(n),deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}:{node:c["default"].findDOMNode(n),deltaX:t-o.lastX,deltaY:e-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:e}},e.prototype.createDraggableData=function(t){var e=this;return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}},e.prototype.getPosition=function(t,e){var n="number"==typeof e?v.getTouch(t,e):null;if("number"==typeof e&&!n)return null;t=n||t;var o=c["default"].findDOMNode(this),r=o.offsetParent,i=g["default"](r).offset(),a=t.clientX+r.scrollLeft-i.left,s=t.clientY+r.scrollTop-i.top;return{x:a,y:s}},e.prototype.handleDragStart=function(t){var e=v.getTouchIdentifier(t);this.setState({touchIdentifier:e});var n=this.getPosition(t,e,this),o=n.x,r=n.y;this.setState({dragging:!0,dragged:!0,lastX:o,lastY:r}),v.addEvent(document,x.move,this.handleDrag.bind(this)),v.addEvent(document,x.stop,this.handleDragStop.bind(this))},e.prototype.handleDrag=function(t){if(!this.state.dragging)return!1;var e=this.getPosition(t,this.state.touchIdentifier,this),n=e.x,o=e.y,r=this.createCoreData(n,o),i=this.createDraggableData(r),a={x:i.x,y:i.y};a.lastX=n,a.lastY=o,this.setState(a)},e.prototype.handleDragStop=function(t){if(!this.state.dragging)return!1;var e={dragging:!1,lastX:NaN,lastY:NaN,slackX:0,slackY:0},n=Boolean(this.props.position);if(n){var o=this.props.position,r=o.x,i=o.y;e.x=r,e.y=i}this.setState(e),v.removeEvent(document,x.move,this.handleDrag),v.removeEvent(document,x.stop,this.handleDragStop)},e.prototype.createCSSTransform=function(t){var e="translate( "+t.x+"px, "+t.y+"px)";return{WebkitTransform:e,MozTransform:e,MsTransform:e,OTransform:e,transform:e}},e.prototype.onMouseDown=function(t){return x=b.mouse,this.handleDragStart(t)},e.prototype.onTouchStart=function(t){return x=b.touch,this.handleDragStart(t)},e.prototype.onMouseUp=function(t){return x=b.mouse,this.handleDragStop(t)},e.prototype.onTouchEnd=function(t){return x=b.touch,this.handleDragStop(t)},e.prototype.reset=function(){var t={x:0,y:0};this.setState(t)},e.prototype.render=function(){var t=this.createCSSTransform(this.state),e=y["default"](this.props.children.props.className||"","draggable",{"draggable-dragging":this.state.dragging,"draggable-dragged":this.state.dragged});return l["default"].createElement("div",a({},this.props,{className:"img-inner",onMouseDown:this.onMouseDown.bind(this),onTouchStart:this.onTouchStart.bind(this),onMouseUp:this.onMouseUp.bind(this),onTouchEnd:this.onTouchEnd.bind(this),style:t}),l["default"].cloneElement(l["default"].Children.only(this.props.children),{className:e,style:a({},this.props.children.props.style)}))},e}(d["default"]);e["default"]=w,t.exports=e["default"]},function(t,e){"use strict";function n(t){var e=t.clientHeight,n=window.getComputedStyle(t);return e+=parseInt(n.borderTopWidth,10),e+=parseInt(n.borderBottomWidth,10)}function o(t){var e=t.clientWidth,n=window.getComputedStyle(t);return e+=parseInt(n.borderLeftWidth,10),e+=parseInt(n.borderRightWidth,10)}function r(t){var e=t.clientHeight,n=window.getComputedStyle(t);return e-=parseInt(n.paddingTop,10),e-=parseInt(n.paddingBottom,10)}function i(t){var e=t.clientWidth,n=window.getComputedStyle(t);return e-=parseInt(n.paddingLeft,10),e-=parseInt(n.paddingRight,10)}function a(t,e,n){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t["on"+e]=n)}function s(t,e,n){t&&(t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t["on"+e]=null)}function u(t,e){for(var n=0,o=t.length;o>n;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function l(t,e){return t.targetTouches&&u(t.targetTouches,function(t){return e===t.identifier})||t.changedTouches&&u(t.changedTouches,function(t){return e===t.identifier})}function p(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:void 0}function c(t){return"number"==typeof t&&!isNaN(t)}e.__esModule=!0,e.outerHeight=n,e.outerWidth=o,e.innerHeight=r,e.innerWidth=i,e.addEvent=a,e.removeEvent=s,e.findInArray=u,e.getTouch=l,e.getTouchIdentifier=p,e.isNum=c},function(t,e,n){var o=n(12);"string"==typeof o&&(o=[[t.id,o,""]]);n(14)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(13)(),e.push([t.id,".upload-icon{fill:#fff;margin:0 5px;cursor:pointer}.icon-box{position:absolute;bottom:20px;background:rgba(0,0,0,.7);padding:5px 10px}.img-wrap{position:relative}.img-wrap.img-wrap-hidden{overflow:hidden}.img-wrap.img-wrap-show{overflow:visible}.img-wrap .draggable{cursor:move}.img-wrap .img-inner{width:100%;height:100%}.img-wrap img{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=c[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(s(o.parts[i],e))}else{for(var a=[],i=0;i<o.parts.length;i++)a.push(s(o.parts[i],e));c[o.id]={id:o.id,refs:1,parts:a}}}}function r(t){for(var e=[],n={},o=0;o<t.length;o++){var r=t[o],i=r[0],a=r[1],s=r[2],u=r[3],l={css:a,media:s,sourceMap:u};n[i]?n[i].parts.push(l):e.push(n[i]={id:i,parts:[l]})}return e}function i(){var t=document.createElement("style"),e=h();return t.type="text/css",e.appendChild(t),t}function a(){var t=document.createElement("link"),e=h();return t.rel="stylesheet",e.appendChild(t),t}function s(t,e){var n,o,r;if(e.singleton){var s=m++;n=g||(g=i()),o=u.bind(null,n,s,!1),r=u.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),o=p.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),o=l.bind(null,n),r=function(){n.parentNode.removeChild(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}function u(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=y(e,r);else{var i=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function l(t,e){var n=e.css,o=e.media;e.sourceMap;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,o=(e.media,e.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(r),i&&URL.revokeObjectURL(i)}var c={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},d=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=f(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,m=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=d());var n=r(t);return o(n,e),function(t){for(var i=[],a=0;a<n.length;a++){var s=n[a],u=c[s.id];u.refs--,i.push(u)}if(t){var l=r(t);o(l,e)}for(var a=0;a<i.length;a++){var u=i[a];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete c[u.id]}}}};var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()}])});